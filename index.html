<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>JSHomework 6</title>
  </head>
  <body>
    <div class="container">
      <h2>Objects</h2>
      <p class="small">*most of the task results with Object will be in console</p>
      <p>
        1.1 Создать хэш таблицу, где ключ = user id, а значение - объект user из
        пердоставленного массива
      </p>
      <button type="button"  onclick="console.log('Table: ', table)">Go</button>

      <p>1.2 Запросить у пользователя id - вывести данные по пользователю.</p>
      <button type="button" onclick="getById()">Go</button>

      <p>
        1.3 Запросить у пользователя id, если такой есть - запросить
        дополнительное поле - адрес. Вывести адрес.
      </p>
      <button type="button" onclick="getAddr()">Go</button>

      <p>
        1.4 Запросить у пользователя ввести название компании - найти
        пользователя с такой компанией - вернуть объект пользователя.
      </p>
      <button type="button" onclick="getByCompany()">Go</button>

      <p>
        1.5 Сделать каждый property id пользователя неудаляемым и запретить его
        мутацию/изменение.
      </p>
      <button type="button" onclick="alert('Enter deepFreeze(table) in console and test it by trying to change some properties')">Go</button>

      <p>
        1.6 Написать сеттер - чтобы при изменении phone - проверялась валидность
        номера телефона при помощи регулярного выражения для (ххх) ххх-хх-хх -
        все х - числа.
      </p>
      <button type="button" onclick="alert('Test this in console by trying to change phone number (example: table[10].phone = ...) Don`t forget to RELOAD PAGE after task 1.5')">Go</button>
    </div>

    <div class="container">
      <h2>Arrays</h2>
      <p>
        2.1 Function to find first and last index <br> Output: [[FIRST_INDEX], [LAST_INDEX]] <br> Default: [-1,-1]        
      </p>
      <button type="button" onclick="first()">Go</button>

      <p>
        2.2 Function to find conjunction of 2 arrays <br> First array: [1, 2, 2, 1] <br> Second array: [2, 2]
      </p>
      <button type="button" onclick="second()">Go</button>

      <p>
        2.3 Function to insert one array into another one by index <br> First array: [1, 2, 3, 4, 5] <br> Second array: [6, 7, 8]  
      </p>
      <button type="button" onclick="third()">Go</button>

      <p>
        2.4 Sort an array from task1 by decreasing id
    </p>
      <button type="button" onclick="console.log(sortArrById(table))">Go</a>
      </button>
    </div>
    <script src="obj.js"></script>
    <script>
        function first() {
            let arr = [5, 7, 7, 8, 8, 10]
            let n = parseInt(prompt("Enter a number"), 10);

            const findFirstLast = (arr, n) => {
                let l = 0
                let r = arr.length - 1

                for (let i = 0; i < arr.length; i++) {
                    if(arr[l] != n) l++
                    if(arr[r] != n) r--
                }
                l = l > arr.length - 1 ? -1 : l
                r = r < 0 ? -1 : r
                return [l, r]
            } 

            alert(`The first and the last index are: [${findFirstLast(arr, n)}]`)
        }
        function second() {
            let arr1 = [1, 2, 2, 1]
            let arr2 = [2, 2]

            const conjunction = (arr1, arr2) => arr1.filter(element => {
                if(arr2.includes(element)) {
                    const index = arr2.indexOf(element)
                    arr2.splice(index, 1)
                    return true
                }
                return false
            })

            alert(`The conjunction of [${arr1}] and [${arr2}]: [${conjunction(arr1, arr2)}]`)
        }
        function third() {
            let arr3 = [1, 2, 3, 4, 5]
            let arr4 = [6, 7, 8]
            let index = parseInt(prompt("Enter index"), 10);

            const insertArr = (arr1, arr2, index) => {
                arr2.forEach(element => {
                    arr1.splice(index, 0, element)
                    index++
                })
                return arr1
            }

            alert(insertArr(arr3, arr4, index))
        }
    </script>
  </body>
</html>
